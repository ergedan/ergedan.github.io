<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="KVM基础, Joah">
    <meta name="description" content="KVM（Kernel-based Virtual Machine）是一种用于Linux内核中的虚拟化的基础设施，可以将Linux内核转换为一个hypervisor（虚拟机器监视器，virtual machine monitor，VMM）。K">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>KVM基础 | Joah</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.jpg" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">Joah</span>
                    </a>
                </div>
                

<a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search" title="搜索"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">Joah</div>
        <div class="logo-desc">
            
            嘿，终于等到你来了。
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/ergedan/" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>fork me
            </a>
        </li>
        
    </ul>

    <div class="social-link">
    <a href="https://github.com/ergedan/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:473823554@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=473823554" class="tooltipped" data-tooltip="QQ联系我: 473823554" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
</div>

            </div>
        </div>

        
        <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/ergedan/" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="fork me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>
</header>





<div class="bg-cover post-cover" style="background-image: url('/medias/featureimages/0.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        KVM基础
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/kvm/" target="_blank">
                                <span class="chip bg-color">kvm</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/虚拟化/" class="post-category" target="_blank">
                                虚拟化
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2017-11-28
                </div>

                
                    
                    <div class="info-break-policy">
                        <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                        3,967
                    </div>
                    

                    
                    <div class="info-break-policy">
                        <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                        18 分
                    </div>
                    
                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>KVM（Kernel-based Virtual Machine）是一种用于Linux内核中的虚拟化的基础设施，可以将Linux内核转换为一个hypervisor（虚拟机器监视器，virtual machine monitor，VMM）。KVM在具备Intel VT或AMD-V功能的X86平台上运行。它包含一个为处理器提供底层虚拟化可加载的核心模块kvm.ko。</p>
<h1 id="一、KVM"><a href="#一、KVM" class="headerlink" title="一、KVM"></a>一、KVM</h1><h2 id="1、Hypervisor类型"><a href="#1、Hypervisor类型" class="headerlink" title="1、Hypervisor类型"></a>1、Hypervisor类型</h2><h3 id="（1）本地或逻辑"><a href="#（1）本地或逻辑" class="headerlink" title="（1）本地或逻辑"></a>（1）本地或逻辑</h3><p>直接运行在主机的硬件来控制和管理客体操作系统上。</p>
<p><img src="http://owatlfstl.bkt.clouddn.com/VMM-Type1.JPG" alt=""></p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>需要硬件支持</li>
<li>虚拟机监视器作为主操作系统</li>
<li>运行效率高</li>
</ul>
<h3 id="（2）主机类型"><a href="#（2）主机类型" class="headerlink" title="（2）主机类型"></a>（2）主机类型</h3><p>这些虚拟机管理程序运行在传统的操作系统上，就像其他计算机程序一样。</p>
<p><img src="http://owatlfstl.bkt.clouddn.com/VMM-Type2.JPG" alt=""></p>
<h4 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h4><ul>
<li>虚拟机监视器为应用程序运行在主操作系统环境中</li>
<li>运行效率一般较低于上一中类型</li>
</ul>
<h3 id="两种类型对比"><a href="#两种类型对比" class="headerlink" title="两种类型对比"></a>两种类型对比</h3><p><img src="http://owatlfstl.bkt.clouddn.com/Hyperviseur.png" alt=""></p>
<h2 id="2、KVM架构"><a href="#2、KVM架构" class="headerlink" title="2、KVM架构"></a>2、KVM架构</h2><p><img src="http://owatlfstl.bkt.clouddn.com/2017-11-30_203741.jpg" alt=""></p>
<h3 id="（1）KVM组成"><a href="#（1）KVM组成" class="headerlink" title="（1）KVM组成"></a>（1）KVM组成</h3><ul>
<li>Guest：客户机系统，包括CPU(VCPU)、内存、驱动等，被KVM置于一种受限制的CPU模式下运行</li>
<li>KVM：运行在内核空间，提供CPU和内存的虚拟化，以及客户机的IO拦截。Guest的IO被KVM拦截后，交给Qemu处理。</li>
<li>QEMU：修改过的为KVM虚拟机使用的QEMU代码，运行在用户空间，提供硬件IO虚拟化，通过IOCTL /dev/kvm设备和KVM交互</li>
</ul>
<h3 id="（2）KVM功能"><a href="#（2）KVM功能" class="headerlink" title="（2）KVM功能"></a>（2）KVM功能</h3><ul>
<li>支持CUP和内存虚拟化</li>
<li>支持半虚拟化IO</li>
<li>支持热插拔</li>
<li>支持对称处理（Symmetric Mutlti-Processing，SMP）</li>
<li>支持实时迁移</li>
<li>支持PCI设备直接分配和单根IO虚拟化</li>
<li>支持内核同页合并</li>
<li>支持NUMA（Non-Unifom Memory Access，非一致存储访问结构）</li>
</ul>
<h3 id="（3）KVM工具"><a href="#（3）KVM工具" class="headerlink" title="（3）KVM工具"></a>（3）KVM工具</h3><ul>
<li>libvirt：操作和管理KVM虚拟机的虚拟化API</li>
<li>Virsh：基于libvirt的命令行工具</li>
<li>Virt-Manager：基于libvirt的GUI工具</li>
<li>Virt-v2v：虚拟机格式迁移工具</li>
<li>Virt-install：创建KVM虚拟机的命令行工具</li>
<li>Virt-viewer：连接到虚拟机屏幕的工具</li>
<li>Virt-clone：虚拟机克隆工具</li>
</ul>
<h3 id="（4）KVM组件"><a href="#（4）KVM组件" class="headerlink" title="（4）KVM组件"></a>（4）KVM组件</h3><ul>
<li>（kvm.ko）/dev/kvm：工作在hypervisor，在用户空间可通过系统调用ioctl（）与内核中的kvm模块交互，从而完成虚拟机的创建、启动、停止、删除等各种管理功能</li>
<li>qemu-kvm进程：工作在用户空间，用于实现IO设备模拟；用于实现一个虚拟机示例</li>
</ul>
<h3 id="（5）KVM模块加载到内存中，运行模式"><a href="#（5）KVM模块加载到内存中，运行模式" class="headerlink" title="（5）KVM模块加载到内存中，运行模式"></a>（5）KVM模块加载到内存中，运行模式</h3><ul>
<li>内核模式：GuestOS执行IO类的操作时，或其他的特殊指令操作时的模式；</li>
<li>用户模式：Host OS用户空间，用于代为GuestOS发出IO请求</li>
<li>来宾模式：GuestOS的用户空间，所有的非IO类请求</li>
</ul>
<h1 id="二、CentOS上安装KVM功能模块步骤"><a href="#二、CentOS上安装KVM功能模块步骤" class="headerlink" title="二、CentOS上安装KVM功能模块步骤"></a>二、CentOS上安装KVM功能模块步骤</h1><h2 id="1、KVM需要有CPU的支持，安装KVM之前检查CPU是否支持虚拟技术。"><a href="#1、KVM需要有CPU的支持，安装KVM之前检查CPU是否支持虚拟技术。" class="headerlink" title="1、KVM需要有CPU的支持，安装KVM之前检查CPU是否支持虚拟技术。"></a>1、KVM需要有CPU的支持，安装KVM之前检查CPU是否支持虚拟技术。</h2><pre><code>基于Intel处理器的系统，查看是否有vmx关键词
基于AMD处理器的系统，查看是否有svm关键词
</code></pre><p><code>[root@node3~]#grep -i -E &#39;(vmx|svm|lm)&#39; /proc/cpuinfo</code></p>
<h2 id="2、安装与启动"><a href="#2、安装与启动" class="headerlink" title="2、安装与启动"></a>2、安装与启动</h2><p><code>[root@node3~]#modprobe kvm</code>    #装载KVM模块</p>
<p><code>[root@node3~]#yum install -y qemu-kvm libvirt-daemon-kvm virt-manager</code> #安装所需要的包</p>
<p><code>[root@node3~]#systemctl status libvirtd.service</code></p>
<h2 id="3、qemu-kvm命令"><a href="#3、qemu-kvm命令" class="headerlink" title="3、qemu-kvm命令"></a>3、qemu-kvm命令</h2><p><code>[root@node3~]#ln -sv /usr/libexec/qemu-kvm /usr/bin/</code>  #创建链接直接调用</p>
<p>语法：</p>
<pre><code>qemu-kvm [options] [disk_image]
</code></pre><h3 id="标准选项"><a href="#标准选项" class="headerlink" title="标准选项"></a>标准选项</h3><pre><code>-machine [type=]name: -machine help 类获取列表，用于指定模拟的主机类型
-cpu cpu：用于指定要模拟CPU型号
-smp n[,maxcpus=cpus][,cores=cores][,threads=threads][,sockets=sockets]：指明虚拟机上的vcpu的数量及拓扑
-boot [order=dirves][,once=dirvices][,menu=on|off][,splash=sp_name][,splash-time=sp_time][,reboot-timeout=rb_time][,strict=on|off]：指定引导次序
        order：各设备的引导次序，c表示第一块硬盘，d表示第一个光驱设备，--boot order=dc，once=d表示引导次序为光驱先引导后硬盘引导，光驱只使用一次
-m megs：虚拟机内存大小
-name NAME：当前虚拟机的名称，要唯一。
</code></pre><h3 id="块设备相关的选项"><a href="#块设备相关的选项" class="headerlink" title="块设备相关的选项"></a>块设备相关的选项</h3><pre><code>-hda/-hdb file：指明IDE总线类型的硬盘映射文件路径；第0和第1个
-hdc/-hdd file：第2个和第3个
-cdrom file：指定要使用光盘映像文件
-dirve [file=file][,if=type][,media=d][,index=i] [,cache=writethrough|writeback|none|directsync|unsafe][,format=f]：
    file=/PATH/TO/SOME_IMAGE_FIEL：映像文件路径
    if=TYPE：块设备总线类型，ide，scsi，sd等
    media=TYPE：介质类型，cdrom和disk
    index=i：设定同一类型设备多个设备的编号
    cache=writethrough|writeback|none|directsync|unsafe：缓存方式
    format=f：磁盘映像文件的格式
</code></pre><h3 id="显示选项："><a href="#显示选项：" class="headerlink" title="显示选项："></a>显示选项：</h3><pre><code>-display type：显示类型，sdl，curses，none和vnc
-nographic：不使用图形接口
-vga [std|cirrus|vmware|qxl|xenfb|none]：模拟出显卡的型号
-vnc display[,option[,option]...]：启动一个vnc server来显示虚拟机接口；让qemu进行监听一个vnc接口
    display：
        HOST:N 在host主机的第N个桌面输出VNC，5900+N
        unix：/PATH/TO/SOCK_FILE
        none
    password：连接此服务所需要的密码
-monitor stdio：在标准输出上显示monitor界面
</code></pre><h3 id="网络选项"><a href="#网络选项" class="headerlink" title="网络选项"></a>网络选项</h3><pre><code>-net nic[,vlan=n][,macaddr=mac][,model=type][,name=str][,add=str][,vectors=v]：为虚拟机创建一个网络接口，并将添加至指定的VLAN
    model=type：指明模拟出的网卡型号
    macaddr=mac：指明mac地址
-net tap[,vlan=n][,name=str][,fd=h][,fds=x:y:...z][,script=file][,downscript=dfile]：通过物理的TAP网络接口连接至vlan
    script=file：启动虚拟机时要执行的脚本，默认为/etc/qemu-ifup
    downscript=file：关闭虚拟机时要执行的脚本/etc/qemu-ifdown
    ifname=NAME：自定义接口名称
</code></pre><h2 id="4、qemu-img命令"><a href="#4、qemu-img命令" class="headerlink" title="4、qemu-img命令"></a>4、qemu-img命令</h2><p>是QEMU的磁盘管理工具</p>
<p>语法：</p>
<pre><code>qemu-img command [command options]

check [-f fmt] filename：对磁盘镜像文件进行一致性检查，查找镜像文件中的错误。支持的格式：qcow2、qed、vdi。

create [-f fmt] [-o options] filename [size]：创建一个格式为fmt大小为size文件名为filename的镜像文件。size大小默认单位为字节（bytes）。

    size             Virtual disk size
    compat           Compatibility level (0.10 or 1.1)
    backing_file     File name of a base image
    backing_fmt      Image format of the base image
    encryption       Encrypt the image
    cluster_size     qcow2 cluster size
    preallocation    Preallocation mode (allowed values: off, metadata, falloc, full)
    lazy_refcounts   Postpone refcount updates

commit [-f fmt] [-t cache] filename：提交filename文件中的更改后端支持镜像文件中去（创建时通过backing_file指定）。

info [-f fmt] filename：显示filename镜像文件的信息。如果文件是使用稀疏文件的存储方式，也会显示他的本来分配的大小，以及实际已占用磁盘空间大小。如果文件中存放由客户机快照，快照信息也会被显示出来。

snapshot [-l|-a snapshot |-c snapshot|-d snapshot] filename
    -l：查询并列出镜像文件中的所有快照
    -a snapshot：让镜像文件使用某个快照
    -c snapshot：创建一个快照
    -d snapshot：删除一个快照

resize filename [+|-] size：改变镜像文件大小；qcow2格式文件不支持缩小镜像操作。 
</code></pre><h2 id="5、brctl命令"><a href="#5、brctl命令" class="headerlink" title="5、brctl命令"></a>5、brctl命令</h2><p>网桥管理工具</p>
<p>格式：</p>
<pre><code>brctl [command]
</code></pre><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>addbr</td>
<td>添加网桥</td>
</tr>
<tr>
<td>delbr</td>
<td>删除网桥</td>
</tr>
<tr>
<td>addif</td>
<td>添加接口</td>
</tr>
<tr>
<td>delif</td>
<td>删除接口</td>
</tr>
<tr>
<td>show</td>
<td>显示网桥</td>
</tr>
<tr>
<td>showmacs</td>
<td>显示网口mac地址</td>
</tr>
</tbody>
</table>
<h2 id="6、建立虚拟机"><a href="#6、建立虚拟机" class="headerlink" title="6、建立虚拟机"></a>6、建立虚拟机</h2><p><img src="http://owatlfstl.bkt.clouddn.com/2017-11-30_211636.jpg" alt=""></p>
<p><img src="http://owatlfstl.bkt.clouddn.com/2017-11-30_234950.jpg" alt=""></p>
<p>后续的操作跟安装操作系统一样。</p>
<h2 id="6、使用qemu-kvm命令创建虚拟机"><a href="#6、使用qemu-kvm命令创建虚拟机" class="headerlink" title="6、使用qemu-kvm命令创建虚拟机"></a>6、使用qemu-kvm命令创建虚拟机</h2><h3 id="（1）创建网桥"><a href="#（1）创建网桥" class="headerlink" title="（1）创建网桥"></a>（1）创建网桥</h3><p><code>[root@node3~]#brctl addbr br0</code><br><code>[root@node3~]#brctl show</code></p>
<pre><code>bridge name     bridge id               STP enabled     interfaces
br0             8000.000000000000       no
</code></pre><p><code>[root@node3~]#ip link set br0 up</code>  #启动链路<br><code>[root@node3~]#ifconfig</code></p>
<pre><code>br0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
</code></pre><p>不过此时还没有IP地址。</p>
<h3 id="配置br0地址"><a href="#配置br0地址" class="headerlink" title="配置br0地址"></a>配置br0地址</h3><p><code>[root@node3~]#brctl addif br0 eth1</code>    #添加设备<br><code>[root@node3~]#ip addr add 172.18.4.63 dev br0</code> #设置IP地址<br><code>[root@node3~]#ifconfig br0 up</code> #启动</p>
<h3 id="raw和qcow2"><a href="#raw和qcow2" class="headerlink" title="raw和qcow2"></a>raw和qcow2</h3><p>qcow2镜像格式是qemu模拟器支持的一种磁盘镜像。它也是可以用一个文件的形式来表示一块固定大小的块设备磁盘。与普通的raw格式镜像相比：</p>
<ul>
<li>更小的空间占用，即时文件系统不支持空桶（holes）</li>
<li>支持写时拷贝，镜像文件只反映底层磁盘的变化</li>
<li>支持快照</li>
<li>可选择基于zlib的压缩格式</li>
<li>可选择AES加密</li>
</ul>
<h3 id="准备虚拟磁盘文件"><a href="#准备虚拟磁盘文件" class="headerlink" title="准备虚拟磁盘文件"></a>准备虚拟磁盘文件</h3><p><code>[root@node3/app/test]#qemu-img create -o preallocation=metadata -f qcow2 /app/test/linux.qcow2 20G</code></p>
<pre><code>Formatting &#39;/app/test/linux.qcow2&#39;, fmt=qcow2 size=21474836480 encryption=off cluster_size=65536 preallocation=&#39;metadata&#39; lazy_refcounts=off  
</code></pre><p>官网下载镜像文件</p>
<p><a href="https://launchpad.net/cirros/" target="_blank" rel="noopener">https://launchpad.net/cirros/</a></p>
<h3 id="创建虚拟机"><a href="#创建虚拟机" class="headerlink" title="创建虚拟机"></a>创建虚拟机</h3><p><code>[root@node3/app/test]#qemu-kvm -cpu host -smp 1 -name linux.test -m 64 -drive file=/app/test/linux.qcow2,if=ide,media=disk,format=qcow2 -drive file=/root/cn_windows_7_ultimate_with_sp1_x64_dvd_u_677408.iso,media=cdrom -boot dc -vnc :2</code></p>
<h4 id="启动cirrors虚拟机系统"><a href="#启动cirrors虚拟机系统" class="headerlink" title="启动cirrors虚拟机系统"></a>启动cirrors虚拟机系统</h4><p><code>[root@node3/app/test]#qemu-kvm -m 64 -name c1 -drive file=/root/cirros-no_cloud-i386.img,media=disk,format=qcow2,if=ide -boot c -vnc :5</code></p>
<h3 id="安装vnc远程管理工具"><a href="#安装vnc远程管理工具" class="headerlink" title="安装vnc远程管理工具"></a>安装vnc远程管理工具</h3><p><code>[root@node3~]#yum install -y vnc-server tigervnc</code></p>
<h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><p><code>[root@node3~]#vncviewer :5901</code><br>连接上就可以自由的操作了 </p>
<h3 id="启动虚拟机将网卡桥接到桥接设备上"><a href="#启动虚拟机将网卡桥接到桥接设备上" class="headerlink" title="启动虚拟机将网卡桥接到桥接设备上"></a>启动虚拟机将网卡桥接到桥接设备上</h3><pre><code>[root@node3~]#vim /etc/qemu-ifup
  1 #!/bin/bash
  2 bridge=br0
  3 if [ -n &quot;$1&quot; ]; then
  4         ip link set $1 up
  5         sleep 1
  6         brctl addif $bridge $1
  7         [ $? -eq 0 ] &amp;&amp; exit 0 || exit 1
  8 else    
  9         echo &quot;error:no interface.&quot;
 10         exit 1
 11 fi 
</code></pre><h3 id="关闭虚拟机后自动将网卡从桥接设备上移除"><a href="#关闭虚拟机后自动将网卡从桥接设备上移除" class="headerlink" title="关闭虚拟机后自动将网卡从桥接设备上移除"></a>关闭虚拟机后自动将网卡从桥接设备上移除</h3><pre><code>[root@node3~]#vim /etc/qemu-ifdown
  1 #!/bin/bash
  2 bridge=br0
  3 if [ -n &quot;$1&quot; ] ;then
  4         brctl delif $bridge $1
  5         ip link set $1 down
  6         exit 0
  7 else    
  8         echo &quot;error:no interface.&quot;
  9         exit 1
 10 fi   
</code></pre><p><code>[root@node3~]#qemu-kvm -name c6 -smp 2,maxcpus=4,sockets=2,cores=2 -m 64 -drive file=/root/cirros-no_cloud-i386.img,if=virtio -vnc :8 -daemonize -net nic,model=e1000,macaddr=52:54:00:00:00:11 -net tap,script=/etc/qemu-ifup</code></p>
<h1 id="二、-virsh"><a href="#二、-virsh" class="headerlink" title="二、 virsh"></a>二、 virsh</h1><p>虚拟机的生成需要依赖于预定义的xml格式的配置文件，其生成工具有两种：virt-manager，virt-install</p>
<h2 id="1、virt-install命令"><a href="#1、virt-install命令" class="headerlink" title="1、virt-install命令"></a>1、virt-install命令</h2><p>安装新的虚拟机</p>
<p>语法：</p>
<pre><code>virt-install [OPTION]...
</code></pre><h3 id="一般选项"><a href="#一般选项" class="headerlink" title="一般选项"></a>一般选项</h3><pre><code>-n NAME,--name=NAME：虚拟机名称，需全局唯一
-r MEMORY：虚拟机内存大小，单位为MB
--vcpus=VCPUS[,maxvcpus=MAX][,sockets=#][,cores=#][,threads=#]：vcpu个数及相关配置
--cpu=CPU：cpu模式及特性
</code></pre><h3 id="安装方法"><a href="#安装方法" class="headerlink" title="安装方法"></a>安装方法</h3><pre><code>-c CDROM,--cdrom=CDROM：光盘安装介质
-l LOCATION,--location=LOCATION：安装源URL，支持FTP,HTTP及NFS等
--pex：基于pxe完成安装
--livedc：把光盘当做liveCD
--os-type 指定操作系统类型，linux、unix、windows
-boot 指定安装过程后的配置选项，
</code></pre><h3 id="存储配置"><a href="#存储配置" class="headerlink" title="存储配置"></a>存储配置</h3><pre><code>--disk=DISKOPTS：指定存储设备及其属性
</code></pre><h3 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h3><pre><code>-w NETWORK，--network=NETWORK，opt1=val1,opt2=val2... 将虚拟机连入宿主机中
    bridge=BRIDGE：连接至桥的设备
    network=NAME：连接至NAME的网络中
    model：网络设备型号
    mac：固定的mac地址
</code></pre><h3 id="图形配置"><a href="#图形配置" class="headerlink" title="图形配置"></a>图形配置</h3><pre><code>--graphics TYPE，opt1，val1... 指定图形显示相关的配置
    TYPE：指定显示类型，vnc、sdl、spice、none，默认为vnc
    port：监听的端口
    listen：监听的地址
    password：认证密码
</code></pre><h3 id="设备选项"><a href="#设备选项" class="headerlink" title="设备选项"></a>设备选项</h3><pre><code>--serial=CHAROPTS：附加一个串行设备至当前虚拟机
    --serial pty：创建伪终端
    --serial dev,path=HOSTPATH：附加主机设备至虚拟机
    --video=VIDEO：指定显卡设备类型，cirrus，vga，qxl，vmvga
</code></pre><h3 id="虚拟化平台选项"><a href="#虚拟化平台选项" class="headerlink" title="虚拟化平台选项"></a>虚拟化平台选项</h3><pre><code>-v，--hvm：当物理机同时支持完全虚拟化和半虚拟化时，指定使用完全虚拟化
-p，--paravirt：指定使用半虚拟化
--virt-type：使用的hypervisor，如kvm、qemu等
</code></pre><h2 id="virsh命令"><a href="#virsh命令" class="headerlink" title="virsh命令"></a>virsh命令</h2><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>list</td>
<td>查看运行的虚拟机</td>
</tr>
<tr>
<td>list –all</td>
<td>查看所有虚拟机</td>
</tr>
<tr>
<td>console</td>
<td>连接虚拟机</td>
</tr>
<tr>
<td>ctrl+]</td>
<td>退出虚拟机</td>
</tr>
<tr>
<td>shutdown</td>
<td>关闭虚拟机</td>
</tr>
<tr>
<td>destroy</td>
<td>这种方式的关闭，是一种删除方式，只是在virsh list中删除了该虚拟机</td>
</tr>
<tr>
<td>suspend</td>
<td>挂起虚拟机</td>
</tr>
<tr>
<td>resume</td>
<td>恢复被挂起的虚拟机</td>
</tr>
<tr>
<td>autostart</td>
<td>子机随宿主机启动而启动</td>
</tr>
<tr>
<td>undefine</td>
<td>删除虚拟机</td>
</tr>
<tr>
<td>start</td>
<td>启动虚拟机</td>
</tr>
<tr>
<td>restore</td>
<td>保存虚拟机的当前状态至文件中</td>
</tr>
<tr>
<td>attach-disk/detach-disk</td>
<td>磁盘设备的热插播</td>
</tr>
<tr>
<td>attach-interface/detach-interface</td>
<td>网络接口设备的热插播，无需事先创建网络接口设备</td>
</tr>
</tbody>
</table>
<p><code>[root@node3~]#virt-install --name=c6 -r 64 --vcpus=2 -f /root/cirros-0.3.0-x86_64-disk.img  --cdrom=/root/kubuntu-17.10-desktop-amd64.iso --graphics vnc,listen=0.0.0.0,port=5930 --network bridge=br0</code></p>
<p>安装完以后会生成xml配置文件。<code>/etc/libvirt/qemu</code>目录下存放。</p>
<p><code>[root@node3/etc/libvirt/qemu]#vim c5.xml</code></p>
<pre><code> 1 &lt;!--
  2 WARNING: THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
  3 OVERWRITTEN AND LOST. Changes to this xml configuration should be made using:
  4   virsh edit c5
  5 or other application using the libvirt API.
  6 --&gt;
  7 
  8 &lt;domain type=&#39;kvm&#39;&gt;
  9   &lt;name&gt;c5&lt;/name&gt;
 10   &lt;uuid&gt;e656a4fe-de06-4fb2-8592-5130ef3a2c7c&lt;/uuid&gt;
 11   &lt;memory unit=&#39;KiB&#39;&gt;65536&lt;/memory&gt;
 12   &lt;currentMemory unit=&#39;KiB&#39;&gt;65536&lt;/currentMemory&gt;
 13   &lt;vcpu placement=&#39;static&#39;&gt;2&lt;/vcpu&gt;
 14   &lt;os&gt;
 15     &lt;type arch=&#39;x86_64&#39; machine=&#39;pc-i440fx-rhel7.0.0&#39;&gt;hvm&lt;/type&gt;
 16     &lt;boot dev=&#39;hd&#39;/&gt;
 17   &lt;/os&gt;
 18   &lt;features&gt;
 19     &lt;acpi/&gt;
 20     &lt;apic/&gt;
 21   &lt;/features&gt;
 22   &lt;cpu mode=&#39;custom&#39; match=&#39;exact&#39; check=&#39;partial&#39;&gt;
 23     &lt;model fallback=&#39;allow&#39;&gt;Haswell-noTSX&lt;/model&gt;
 26     &lt;timer name=&#39;rtc&#39; tickpolicy=&#39;catchup&#39;/&gt;
 27     &lt;timer name=&#39;pit&#39; tickpolicy=&#39;delay&#39;/&gt;
 28     &lt;timer name=&#39;hpet&#39; present=&#39;no&#39;/&gt;
 29   &lt;/clock&gt;
 30   &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
 31   &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
 32   &lt;on_crash&gt;destroy&lt;/on_crash&gt;
 33   &lt;pm&gt;
 34     &lt;suspend-to-mem enabled=&#39;no&#39;/&gt;
 35     &lt;suspend-to-disk enabled=&#39;no&#39;/&gt;
 36   &lt;/pm&gt;
 37   &lt;devices&gt;
 38     &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;
 39     &lt;disk type=&#39;file&#39; device=&#39;disk&#39;&gt;
 40       &lt;driver name=&#39;qemu&#39; type=&#39;qcow2&#39;/&gt;
 41       &lt;source file=&#39;/root/centos.img&#39;/&gt;
 42       &lt;target dev=&#39;hda&#39; bus=&#39;ide&#39;/&gt;
 43       &lt;address type=&#39;drive&#39; controller=&#39;0&#39; bus=&#39;0&#39; target=&#39;0&#39; unit=&#39;0&#39;/&gt;
 44     &lt;/disk&gt;
 45     &lt;disk type=&#39;file&#39; device=&#39;cdrom&#39;&gt;
 46       &lt;driver name=&#39;qemu&#39; type=&#39;raw&#39;/&gt;
 47       &lt;target dev=&#39;hdb&#39; bus=&#39;ide&#39;/&gt;
 48       &lt;readonly/&gt;
 49       &lt;address type=&#39;drive&#39; controller=&#39;0&#39; bus=&#39;0&#39; target=&#39;0&#39; unit=&#39;1&#39;/&gt;
 50     &lt;/disk&gt;
 51     &lt;controller type=&#39;usb&#39; index=&#39;0&#39; model=&#39;ich9-ehci1&#39;&gt;
 52       &lt;address type=&#39;pci&#39; domain=&#39;0x0000&#39; bus=&#39;0x00&#39; slot=&#39;0x04&#39; function=&#39;0x7&#39;/&gt;
 53     &lt;/controller&gt;
 54     &lt;controller type=&#39;usb&#39; index=&#39;0&#39; model=&#39;ich9-uhci1&#39;&gt;
 55       &lt;master startport=&#39;0&#39;/&gt;
 57     &lt;/controller&gt;
 58     &lt;controller type=&#39;usb&#39; index=&#39;0&#39; model=&#39;ich9-uhci2&#39;&gt;
 59       &lt;master startport=&#39;2&#39;/&gt;
 60       &lt;address type=&#39;pci&#39; domain=&#39;0x0000&#39; bus=&#39;0x00&#39; slot=&#39;0x04&#39; function=&#39;0x1&#39;/&gt;
 61     &lt;/controller&gt;
 62     &lt;controller type=&#39;usb&#39; index=&#39;0&#39; model=&#39;ich9-uhci3&#39;&gt;
 63       &lt;master startport=&#39;4&#39;/&gt;
 64       &lt;address type=&#39;pci&#39; domain=&#39;0x0000&#39; bus=&#39;0x00&#39; slot=&#39;0x04&#39; function=&#39;0x2&#39;/&gt;
 65     &lt;/controller&gt;
 66     &lt;controller type=&#39;pci&#39; index=&#39;0&#39; model=&#39;pci-root&#39;/&gt;
 67     &lt;controller type=&#39;ide&#39; index=&#39;0&#39;&gt;
 68       &lt;address type=&#39;pci&#39; domain=&#39;0x0000&#39; bus=&#39;0x00&#39; slot=&#39;0x01&#39; function=&#39;0x1&#39;/&gt;
 69     &lt;/controller&gt;
 70     &lt;interface type=&#39;bridge&#39;&gt;
 71       &lt;mac address=&#39;52:54:00:3c:ed:ab&#39;/&gt;
 72       &lt;source bridge=&#39;br0&#39;/&gt;
 73       &lt;model type=&#39;rtl8139&#39;/&gt;
 74       &lt;address type=&#39;pci&#39; domain=&#39;0x0000&#39; bus=&#39;0x00&#39; slot=&#39;0x03&#39; function=&#39;0x0&#39;/&gt;
 75     &lt;/interface&gt;
 76     &lt;serial type=&#39;pty&#39;&gt;
 77       &lt;target port=&#39;0&#39;/&gt;
 78     &lt;/serial&gt;
 79     &lt;console type=&#39;pty&#39;&gt;
 80       &lt;target type=&#39;serial&#39; port=&#39;0&#39;/&gt;
 81     &lt;/console&gt;
 82     &lt;input type=&#39;mouse&#39; bus=&#39;ps2&#39;/&gt;
 83     &lt;input type=&#39;keyboard&#39; bus=&#39;ps2&#39;/&gt;
 84     &lt;graphics type=&#39;vnc&#39; port=&#39;5920&#39; autoport=&#39;no&#39; listen=&#39;0.0.0.0&#39;&gt;
 85       &lt;listen type=&#39;address&#39; address=&#39;0.0.0.0&#39;/&gt;
 86     &lt;/graphics&gt;
 87     &lt;video&gt;
 88       &lt;model type=&#39;cirrus&#39; vram=&#39;16384&#39; heads=&#39;1&#39; primary=&#39;yes&#39;/&gt;
 89       &lt;address type=&#39;pci&#39; domain=&#39;0x0000&#39; bus=&#39;0x00&#39; slot=&#39;0x02&#39; function=&#39;0x0&#39;/&gt;
 90     &lt;/video&gt;
 91     &lt;memballoon model=&#39;virtio&#39;&gt;
 92       &lt;address type=&#39;pci&#39; domain=&#39;0x0000&#39; bus=&#39;0x00&#39; slot=&#39;0x05&#39; function=&#39;0x0&#39;/&gt;
 93     &lt;/memballoon&gt;
 94   &lt;/devices&gt;
 95 &lt;/domain&gt;
</code></pre><p>可以通过修改这个文件直接启动一个新的虚拟机。</p>
<p><strong>注意：修改配置文件需必须修改name、UUID、mac、port，其他的按需修改。</strong></p>
<p><code>[root@node3/etc/libvirt/qemu]#virsh define c7.xmk</code> #使其配置文件生效</p>
<p><code>[root@node3/etc/libvirt/qemu]#virsh start c7</code>  #启动虚拟机</p>
<p><hr></p>
<blockquote>
<p>由于在使用virsh、qemu-kvm工具创建虚拟机时，命令繁琐，操作不易，因此推荐一款WEB UI的工具。</p>
<h1 id="一、图形管理工具"><a href="#一、图形管理工具" class="headerlink" title="一、图形管理工具"></a>一、图形管理工具</h1></blockquote>
<h2 id="二、图形化工具介绍"><a href="#二、图形化工具介绍" class="headerlink" title="二、图形化工具介绍"></a>二、图形化工具介绍</h2><h3 id="1、Wok"><a href="#1、Wok" class="headerlink" title="1、Wok"></a>1、Wok</h3><p>Wok基于cherrypy的web框架，可以通过一些插件来进行扩展，例如：虚拟化管理、主机管理、系统管理。</p>
<h3 id="2、Kimchi"><a href="#2、Kimchi" class="headerlink" title="2、Kimchi"></a>2、Kimchi</h3><p>一个基于HTML5的KVM管理工具，是Wok的一个插件，通过Kimchi可以更方便的管理KVM。Kimchi是Wok个一个插件。</p>
<h2 id="三、安装并启动"><a href="#三、安装并启动" class="headerlink" title="三、安装并启动"></a>三、安装并启动</h2><p>确保已经在VMware虚拟机上开启了虚拟化</p>
<p><img src="http://owatlfstl.bkt.clouddn.com/2017-12-03_110708.jpg" alt=""></p>
<p><code>[root@node1~]#grep -i -E &#39;(vmx|svm|lm)&#39; /proc/cpuinfo</code></p>
<h3 id="1、建议依赖关系相关的包"><a href="#1、建议依赖关系相关的包" class="headerlink" title="1、建议依赖关系相关的包"></a>1、建议依赖关系相关的包</h3><pre><code>[root@node3~]#yum install gcc make autoconf automake gettext-devel git rpm-build \
&gt;                     libxslt
</code></pre><h3 id="2、安装运行时相关的包"><a href="#2、安装运行时相关的包" class="headerlink" title="2、安装运行时相关的包"></a>2、安装运行时相关的包</h3><pre><code>[root@node3~]#yum install libvirt-python libvirt libvirt-daemon-config-network \
&gt;                     qemu-kvm python-ethtool sos python-ipaddr nfs-utils \
&gt;                     iscsi-initiator-utils pyparted python-libguestfs \
&gt;                     libguestfs-tools novnc spice-html5 \
&gt;                     python-configobj python-magic python-paramiko \
&gt;                     python-pillow
</code></pre><h3 id="3、UI开发所需要的软件包"><a href="#3、UI开发所需要的软件包" class="headerlink" title="3、UI开发所需要的软件包"></a>3、UI开发所需要的软件包</h3><pre><code>[root@node3~]#yum install gcc-c++ python-devel python-pip

[root@node3~]#pip install cython libsass
</code></pre><p><strong>注意：上述三部也可以不直接这样安装，当安装Wok，Kimchi是自动安装依赖的包。</strong></p>
<h3 id="4、下载kimchi包"><a href="#4、下载kimchi包" class="headerlink" title="4、下载kimchi包"></a>4、下载kimchi包</h3><p>下载地址：<a href="https://github.com/kimchi-project/kimchi/releases/tag/2.5.0" target="_blank" rel="noopener">https://github.com/kimchi-project/kimchi/releases/tag/2.5.0</a></p>
<p><code>[root@node3~]#yum install -y wok-2.5.0-0.el7.centos.noarch.rpm</code></p>
<p><code>[root@node3~]#yum install -y kimchi-2.5.0-0.el7.centos.noarch.rpm</code></p>
<p><strong>注意：需先安装Wok再安装Kimchi，因为Kimchi是Wok的一个插件。</strong></p>
<h4 id="5、启动wok服务"><a href="#5、启动wok服务" class="headerlink" title="5、启动wok服务"></a>5、启动wok服务</h4><p><code>[root@node3/etc/wok]#systemctl daemon-reload</code><br><code>[root@node3/etc/wok]#systemctl start wokd</code><br><code>[root@node3/etc/wok]#systemctl status wokd</code></p>
<p>网页地址输入：<a href="https://192.168.4.63:8001/login.html" target="_blank" rel="noopener">https://192.168.4.63:8001/login.html</a></p>
<p><img src="http://owatlfstl.bkt.clouddn.com/2017-12-02_113539.jpg" alt=""></p>
<h5 id="在管理界面就可以直接创建，管理虚拟机了。"><a href="#在管理界面就可以直接创建，管理虚拟机了。" class="headerlink" title="在管理界面就可以直接创建，管理虚拟机了。"></a>在管理界面就可以直接创建，管理虚拟机了。</h5><p><img src="http://owatlfstl.bkt.clouddn.com/2017-12-03_111623.jpg" alt=""></p>
<h5 id="管理界面"><a href="#管理界面" class="headerlink" title="管理界面"></a>管理界面</h5>
            </div>
            <hr/>

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff;
        background-color: #22AB38;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff;
        background-color: #019FE8;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a class="reward-link btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs">
                        <li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li>
                        <li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#reward .reward-link').on('click', function () {
            $('#rewardModal').openModal();
        });

        $('#rewardModal .close').on('click', function () {
            $('#rewardModal').closeModal();
        });
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            <div class="reprint">
                <p>
                    <span class="reprint-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明:
                    </span>
                    <a href="www.lmfe.org" class="b-link-green">Joah</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2017/11/28/KVM/" class="b-link-green">KVM基础</a>
                </p>
            </div>
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2017/11/28/Dropbear/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="Dropbear">
                        
                        <span class="card-title">Dropbear</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">dropbearDropbear是一个相对较小的SSH服务器和客户端。它运行在一个基于POSIX的各种平台。 Dropbear是开源软件，在麻省理工学院式的许可证。 Dropbear是特别有用的“嵌入”式的Linux（或其他Unix）系统，</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2017-11-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/命令/" class="post-category" target="_blank">
                                    命令
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/dropbear/" target="_blank">
                        <span class="chip bg-color">dropbear</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2017/11/28/LAMP/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/16.jpg" class="responsive-img" alt="LAMP">
                        
                        <span class="card-title">LAMP</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">一、LAMP1、概念LAMP指的Linux（操作系统）、ApacheHTTP 服务器，MySQL（有时也指MariaDB，数据库软件） 和PHP（有时也是指Perl或Python） 的第一个字母，一般用来建立web应用平台。
2、web资源</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2017-11-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/常用服务/" class="post-category" target="_blank">
                                    常用服务
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/LAMP/" target="_blank">
                        <span class="chip bg-color">LAMP</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            本站由&copy;<a href="https://blinkfox.github.io/" target="_blank">Blinkfox</a>基于
            <a href="https://hexo.io/" target="_blank">Hexo</a> 的
            <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建.

            
                &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
                <span class="white-color">179.1k</span>
            

            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
                </span>
                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/ergedan/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:473823554@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=473823554" class="tooltipped" data-tooltip="QQ联系我: 473823554" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input" autofocus="">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->




    <script async src="/libs/others/busuanzi.pure.mini.js"></script>


</body>
</html>