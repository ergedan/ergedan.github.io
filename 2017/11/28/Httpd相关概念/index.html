<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="HTTP介绍, Joah">
    <meta name="description" content="一、HTTP概念及相关术语1、概念HTTP协议（HyperText Transfer Protocol，超文本传输协议）是用于从WWW服务器传输超文本到本地浏览器的传输协议。它可以使浏览器更加高效，使网络传输减少。它不仅保证计算机正确快速地">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>HTTP介绍 | Joah</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.jpg" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">Joah</span>
                    </a>
                </div>
                

<a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search" title="搜索"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">Joah</div>
        <div class="logo-desc">
            
            嘿，终于等到你来了。
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/ergedan/" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>fork me
            </a>
        </li>
        
    </ul>

    <div class="social-link">
    <a href="https://github.com/ergedan/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:473823554@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=473823554" class="tooltipped" data-tooltip="QQ联系我: 473823554" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
</div>

            </div>
        </div>

        
        <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/ergedan/" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="fork me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>
</header>





<div class="bg-cover post-cover" style="background-image: url('/medias/featureimages/2.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        HTTP介绍
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Apache，HTTP/" target="_blank">
                                <span class="chip bg-color">Apache，HTTP</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/服务/" class="post-category" target="_blank">
                                服务
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2017-11-28
                </div>

                
                    
                    <div class="info-break-policy">
                        <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                        3,819
                    </div>
                    

                    
                    <div class="info-break-policy">
                        <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                        15 分
                    </div>
                    
                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="一、HTTP概念及相关术语"><a href="#一、HTTP概念及相关术语" class="headerlink" title="一、HTTP概念及相关术语"></a>一、HTTP概念及相关术语</h2><h3 id="1、概念"><a href="#1、概念" class="headerlink" title="1、概念"></a>1、概念</h3><pre><code>HTTP协议（HyperText Transfer Protocol，超文本传输协议）是用于从WWW服务器传输超文本到本地浏览器的传输协议。它可以使浏览器更加高效，使网络传输减少。它不仅保证计算机正确快速地传输超文本文档，还确定传输文档中的哪一部分，以及哪部分内容首先显示(如文本先于图形)等。
</code></pre><h3 id="2、HTTP协议介绍"><a href="#2、HTTP协议介绍" class="headerlink" title="2、HTTP协议介绍"></a>2、HTTP协议介绍</h3><blockquote>
<p>http/0.9</p>
</blockquote>
<p>1991，原型版本，功能简陋，只有一个命令GET。GET /index.html ,服务器只能回应HTML格式字符串，不能回应别的格式</p>
<blockquote>
<p>http/1.0</p>
</blockquote>
<p>1996年5月,支持cache, MIME, method每个TCP连接只能发送一个请求，发送数据完毕，连接就关闭，如果还要请求其他资源，就必须再新建一个连接。（1）引入了POST命令和HEAD命令头信息是 ASCII 码，后面数据可为任何格式。服务器回应时会告诉客户端，数据是什么格式，即<strong>Content-Type</strong>字段的作用。这些数据类型总称为MIME 多用途互联网邮件扩展，每个值包括一级类型和二级类型，预定义的类型，也可自定义类型。</p>
<blockquote>
<p>http/1.1</p>
</blockquote>
<p>1997年1月（1）引入了持久连接（<strong>persistent connection</strong>），即TCP连接默认不关闭，可以被多个请求复用，不用声明<strong>Connection: keep-alive</strong>。对于同一个域名，大多数浏览器允许同时建立<em>6</em>个持久连接。（2）引入了管道机制（pipelining），即在同一个TCP连接里，客户端可以同时发送多个请求，进一步改进了HTTP协议的效率。新增方法：PUT、PATCH、OPTIONS、DELETE。</p>
<p>同一个TCP连接里面，所有的数据通信是按次序进行的。服务器只能顺序处理回应，前面的回应慢，会有许多请求排队，造成”队头堵塞”（Head-of-line blocking）。为避免这种问题出现：一是减少请求数，二是同时多开持久连接。</p>
<p>网页优化技巧，比如合并脚本和样式表、将图片嵌入CSS代码、域名分片（domain sharding）等。</p>
<p>HTTP 协议不带有状态，每次请求都必须附上所有信息。请求的很多字段都是重复的，浪费带宽，影响速度<br>Spdy：2009年,谷歌研发,解决 HTTP/1.1 效率不高问题。</p>
<blockquote>
<p>http/2.0</p>
</blockquote>
<p>2015年头信息和数据体都是二进制，称为头信息帧和数据帧。（1）复用TCP连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，且不用按顺序一一对应，避免了“队头堵塞“,此双向的实时通信称为多工（Multiplexing）。（2）引入头信息压缩机制（header compression）,头信息使用gzip或compress压缩后再发送；客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，不发送同样字段，只发送索引号，提高速度。（3）HTTP/2 允许服务器未经请求，主动向客户端发送资源，即服务器推送（server push）。</p>
<h3 id="3、MIME（Multiprocess-Internet-Mail-Extensions）"><a href="#3、MIME（Multiprocess-Internet-Mail-Extensions）" class="headerlink" title="3、MIME（Multiprocess Internet Mail Extensions）"></a>3、MIME（Multiprocess Internet Mail Extensions）</h3><h4 id="1、概念-1"><a href="#1、概念-1" class="headerlink" title="1、概念"></a>1、概念</h4><p>多用途互联网邮件扩展类型。是设定某种扩展名的文件用一种应用程序来打开的方式类型，当该扩展名文件被访问的时候，浏览器会自动使用指定应用程序来打开。多用于指定一些客户端自定义的文件名，以及一些媒体文件打开方式。</p>
<h4 id="2、MIME类型"><a href="#2、MIME类型" class="headerlink" title="2、MIME类型"></a>2、MIME类型</h4><ul>
<li><p>魔法分类：Apache web服务器可以扫描每个资源的内容，并将其与一个已知模式表(被称为魔法文件)进行匹配，以决定每个文件的MIME类型。这样做可能比较慢，但很方便，尤其是文件没有标准扩展名的时候</p>
</li>
<li><p>显式分类：可以对Web服务器进行配置，使其不考虑文件的扩展名或内容，强制特定文件或目录内容拥有某个MIME类型</p>
</li>
<li><p>类型协商： 有些Web服务器经过配置，可以以多种文档格式来存储资源。在这种情况下，可以配置Web服务器，使其可以通过与用户的协商来决定使用哪种格式(及相关的MIME类型)”最好”</p>
</li>
</ul>
<h4 id="3、MIME格式"><a href="#3、MIME格式" class="headerlink" title="3、MIME格式"></a>3、MIME格式</h4><pre><code>Content-Type: [type]/[subtype]; parameter
</code></pre><p><strong>type类型</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Text</td>
<td>用于标准化地表示的文本信息，文本消息可以是多种字符集和或者多种格式的；</td>
</tr>
<tr>
<td>Multipart</td>
<td>用于连接消息体的多个部分构成一个消息，这些部分可以是不同类型的数据；</td>
</tr>
<tr>
<td>Application</td>
<td>用于传输应用程序数据或者二进制数据；</td>
</tr>
<tr>
<td>Message</td>
<td>用于包装一个E-mail消息；</td>
</tr>
<tr>
<td>Image</td>
<td>用于传输静态图片数据；</td>
</tr>
<tr>
<td>Audio</td>
<td>用于传输音频或者音声数据；</td>
</tr>
<tr>
<td>Video</td>
<td>用于传输动态影像数据，可以是与音频编辑在一起的视频数据格式</td>
</tr>
</tbody>
</table>
<p><strong>subtype类型</strong></p>
<p>subtype是用于指定type详细形式。</p>
<table>
<thead>
<tr>
<th>子类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>text/plain</td>
<td>纯文本，文件扩展名.txt</td>
</tr>
<tr>
<td>text/html</td>
<td>HTML文，文件扩展名.html 或.htm</td>
</tr>
<tr>
<td>application/xhtml+xml</td>
<td>XHTML文</td>
</tr>
<tr>
<td>image/gif</td>
<td>GIF图像</td>
</tr>
<tr>
<td>image/jpeg</td>
<td>JPEG图像</td>
</tr>
<tr>
<td>image/png</td>
<td>PNG图像</td>
</tr>
<tr>
<td>video/mpeg</td>
<td>MPEG动画</td>
</tr>
<tr>
<td>application/octet-stream</td>
<td>任意的二进制数据</td>
</tr>
<tr>
<td>application/pdf</td>
<td>PDF文档</td>
</tr>
<tr>
<td>application/msword</td>
<td>Microsoft Word文件</td>
</tr>
<tr>
<td>application/vnd.wap.xhtml+xml</td>
<td>wap1.0+</td>
</tr>
<tr>
<td>application/xhtml+xml</td>
<td>wap2.0+</td>
</tr>
<tr>
<td>message/rfc822</td>
<td>RFC 822形式</td>
</tr>
<tr>
<td>multipart/alternative</td>
<td>HTML邮件的HTML形式和纯文本形式，相同内容使用不同形式表示</td>
</tr>
<tr>
<td>application/x-www-form-urlencoded</td>
<td>使用HTTP的POST方法提交的表单</td>
</tr>
<tr>
<td>multipart/form-data</td>
<td>同上，但主要用于表单提交时伴随文件上传的场合</td>
</tr>
</tbody>
</table>
<p><strong>parameter</strong></p>
<p>可用来指定附加的信息，更多情况下是用于指定text/plain和text/html等的文字编码方式的charset参数。</p>
<pre><code> Content-Transfer-Encoding: [mechanism]
</code></pre><p>内容传输编码，指定ASCII意外的字符编码方式，用来对附件进行解码。</p>
<table>
<thead>
<tr>
<th>编码格式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>7bit</td>
<td>用在US ASCII字符集上</td>
</tr>
<tr>
<td>8bit和binary</td>
<td>一般不使用</td>
</tr>
<tr>
<td>quoted printable</td>
<td>可读的标准文本，如果传输要经过对格式有影响的网关时对其进行保护</td>
</tr>
<tr>
<td>base64</td>
<td>通用方法，通常在二进制中，非文本数据</td>
</tr>
</tbody>
</table>
<p>如果想查看MIME的类型可以查看文件<code>/etc/mime.types</code></p>
<h3 id="4、URI"><a href="#4、URI" class="headerlink" title="4、URI"></a>4、URI</h3><p>统一资源标识符（Uniform Resource Identifier，或URI）是一个用于标识某一互联网资源名称的字符串。 该种标识允许用户对网络中（一般指万维网）的资源通过特定的协议进行交互操作。分为两种URL（Uniform Resource Location）和URN（Uniform Resource Name）。URL用于描述某服务器某特定资源位置。URN其目的是通过提供一种途径，用于在特定的命名空间资源的标识，以补充网址并不指定地址。说白了URL就是一个人的住址，URN是一个人的名字。URN定义某事物的身份，而URL提供查找该事物的方法。</p>
<p><img src="http://owatlfstl.bkt.clouddn.com/2017-09-27_200240.png" alt=""></p>
<blockquote>
<p>URL组成</p>
</blockquote>
<pre><code>                hierarchical part
    ┌───────────────────┴─────────────────────┐
                authority               path
    ┌───────────────┴───────────────┐┌───┴────┐
  abc://username:password@example.com:123/path/data?key=value&amp;key2=value2#fragid1
  └┬┘   └───────┬───────┘ └────┬────┘ └┬┘           └─────────┬─────────┘ └──┬──┘
scheme  user information     host     port                  query         fragment

  urn:example:mammal:monotreme:echidna
  └┬┘ └──────────────┬───────────────┘
scheme              path
</code></pre><table>
<thead>
<tr>
<th>种类</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>scheme</td>
<td>方案，访问服务器以获取资源时要使用哪种协议</td>
</tr>
<tr>
<td>user</td>
<td>用户，某些方案访问资源时需要用户名</td>
</tr>
<tr>
<td>password</td>
<td>用户对应的密码；user:password</td>
</tr>
<tr>
<td>host</td>
<td>资源宿主机主机名或IP地址</td>
</tr>
<tr>
<td>part</td>
<td>资源宿主机正在监听的端口号，很多方案都有默认的端口号</td>
</tr>
<tr>
<td>path</td>
<td>服务器资源的本地名，有一个/将其与前面的URL组件分割</td>
</tr>
<tr>
<td>params</td>
<td>指定输入的参数，参数为名/值对，用“；”分隔</td>
</tr>
<tr>
<td>query</td>
<td>查询，传递参数给程序，用”?”分隔，多个查询使用“&amp;”分隔</td>
</tr>
<tr>
<td>frag</td>
<td>片段，一小片或一部分资源的名字，此组件在客户端使用，用“#”分隔</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<pre><code>http://www.test.com:8080/images/logo.jpg
ftp://xiaoming:password@192.168.4.150/pub/linux.ppt
rtsp://videoserver/video_demo/Real Time Streaming Protocol
http://wwwtest.com/bbs/hello;gender=f/send;type=title
https://list.jd.com/list.html?cat=670,671,672&amp;ev=149
_2992&amp;sort=sort_totalsales15_desc&amp;trans=1
http://apache.org/index.html#projects-list
</code></pre><h2 id="二、HTTP的工作机制"><a href="#二、HTTP的工作机制" class="headerlink" title="二、HTTP的工作机制"></a>二、HTTP的工作机制</h2><p>当我们去访问一个网站是一个网页并不是单单的一个资源，是由多个资源展示出来；每个资源都要单独的请求。</p>
<p>现在我们需要区分两个概念静态文件和动态文件</p>
<pre><code>静态文件：无需服务端做出额外处理，说白了就是写死的，任何人访问此资源时，都显示同一个页面内容。文件后缀：.jpg .html  .txt .js .css .mp3 .avi
动态文件：服务端执行程序之后，返回执行结果。说白了就是不同的人、不同时候访问此页面，显示的内容可能不同。文件后缀：.asp .php .jsp
</code></pre><blockquote>
<p>非持久连接和持久连接</p>
</blockquote>
<p>非持久连接：一个请求与服务器连接传输完成之后，端口。如果下一个请求过来，再建立连接。</p>
<blockquote>
<p>缺点</p>
</blockquote>
<p>(1)客户为每个待请求的对象建立并维护一个新得连接。对于每个这个的连接，TCP必须同时在客户端和服务器端分配TCP缓冲区，并维护TCP变量。对于有可能同时为来自数百个不同客户的请求提供服务的Web服务器来说，这会严重增加服务器的负担；</p>
<p>(2)对每个对象请求都有2个RTT(Round-Trip Time 往返时延)的响应延迟：一个RTT用于建立TCP连接，另一个RTT用于请求和接收对象；<a href="http://blog.csdn.net/jackywangjia/article/details/27643379" target="_blank" rel="noopener">http://blog.csdn.net/jackywangjia/article/details/27643379</a></p>
<p>(3)每个对象都要经历 TCP 缓启动，因为每个TCP连接都要起始于slow start 阶段。并行TCP连接的使用能够部分减轻RTT延迟和缓启动的影响。</p>
<p>持久连接：当完成一次请求之后，服务器在发出响应后让TCP连接继续打开着。同一对客户/服务器之间的后续请求和响应可以通过这个连接发送。</p>
<p>缺点：服务器送出一个对象后开始等待下一个请求，而这个新请求却不能马上到达。这段时间服务器资源便闲置了。</p>
<blockquote>
<p>如何提高HTTP连接性能呢？</p>
</blockquote>
<ul>
<li>并行连接：通过多条TCP连接发起并发的HTTP请求</li>
</ul>
<p><img src="http://owatlfstl.bkt.clouddn.com/rr.jpg" alt=""></p>
<ul>
<li>持久连接：keep-alive,长连接，重用TCP连接，以消除连接和关闭的时延,以事务个数和时间来决定是否关闭连接</li>
</ul>
<p><img src="http://owatlfstl.bkt.clouddn.com/dd.jpg" alt=""></p>
<ul>
<li>管道化连接：通过共享TCP连接发起并发的HTTP请求</li>
</ul>
<p><img src="http://owatlfstl.bkt.clouddn.com/eew.jpg" alt=""></p>
<ul>
<li>复用的连接：交替传送请求和响应报文（实验阶段）</li>
</ul>
<blockquote>
<p>Web响应模型介绍</p>
</blockquote>
<ul>
<li><p>单进程I/O模型：启动一个进程处理用户请求，而且一次只处理一个，当发出多个请求时，被串联响应。<br><img src="http://owatlfstl.bkt.clouddn.com/aaqq.jpg" alt=""></p>
</li>
<li><p>多进程I/O模型：并行启动多个进程，每个进程响应一个连接请求。<br><img src="http://owatlfstl.bkt.clouddn.com/aae.jpg" alt=""></p>
</li>
<li><p>复用I/O请求：启动一个进程，同时响应N个连接请求。<br><img src="http://owatlfstl.bkt.clouddn.com/er.jpg" alt=""></p>
</li>
<li><p>复用多进程I/O模型：启动M个进程，每个进程响应N个请求，同时接受M*N个请求。</p>
</li>
</ul>
<p><img src="http://owatlfstl.bkt.clouddn.com/rrt.jpg" alt=""></p>
<h2 id="三、新特性"><a href="#三、新特性" class="headerlink" title="三、新特性"></a>三、新特性</h2><ul>
<li>MPM支持运行为DSO机制，以模块形式按需加载</li>
<li>event MPM生产环境可用</li>
<li>异步读写机制</li>
<li>支持每模块及每目录的单独自制级别定义</li>
<li>每请求相关的专用配置</li>
<li>增强版的表达式分析式</li>
<li>毫秒级持久连接时长定义</li>
<li>基于FQDN的虚拟主机不需要NameVirtualHost指令</li>
<li>新指令，AllowOverList</li>
<li>支持用户自定义变量</li>
<li>更低的内存消耗</li>
<li>不再支持使用Order，Deny,Allow来做基于IP的访问控制新模块</li>
</ul>
<h2 id="httpd-2-4文件介绍"><a href="#httpd-2-4文件介绍" class="headerlink" title="httpd-2.4文件介绍"></a>httpd-2.4文件介绍</h2><p>-配置文件</p>
<pre><code>/etc/httpd/conf/httpd/conf
/etc/httpd/conf.d/*.conf
</code></pre><ul>
<li><p>模块相关的配置文件</p>
<p>  /etc/httpd/conf.modules.d/*.conf</p>
</li>
<li><p>系统启动文件</p>
<p>  /usr/lib/systemd/system/httpd/service</p>
</li>
<li><p>主程序文件</p>
<p>  /usr/sbin/httpdd</p>
</li>
<li><p>日志文件</p>
<p>  /var/log/httpd/access_log<br>  /var/log/httpd/error_log</p>
</li>
<li><p>站点文档</p>
<p>  /var/www/html</p>
</li>
<li><p>模块文件路径</p>
<p>  /usr/lib64/httpd/moudles<br>  /etc/httpd/modules</p>
</li>
</ul>
<h2 id="相关设置介绍"><a href="#相关设置介绍" class="headerlink" title="相关设置介绍"></a>相关设置介绍</h2><p>（1）切换使用MPM</p>
<p><code>[root@localhost/etc/httpd/conf.modules.d]#vim 00-mpm.conf</code></p>
<p><img src="http://owatlfstl.bkt.clouddn.com/2017-10-01_211652.jpg" alt=""></p>
<p>如上图所示，如果要使用其他MPM将注释取消重启即可。</p>
<p>（2）认证方式</p>
<ul>
<li><p>无明确授权的记录，默认拒绝</p>
<p>  允许所有主机访问：Require all granted<br>  拒绝所有主机访问：Require all denied</p>
</li>
<li><p>控制特定的IP访问</p>
<p>  Require ip IPADDR :授权指定来源的IP访问<br>  Require not ip IPADDR：拒绝特定的IP访问</p>
</li>
<li><p>控制特定的主机访问</p>
<p>  Require host HOSTNAME :授权特定主机访问<br>  Require not host HOSTNAME：拒绝特定主机访问</p>
<pre><code>  HOSTNAME:
      FQDN:特定主机
      domain.tld：指定域名下的所有主机
</code></pre></li>
</ul>
<blockquote>
<p>使用示例</p>
</blockquote>
<pre><code>&lt;RequireAll&gt;
    Require all granted
    Require not ip 192.168.4.150
&lt;/RequireAll&gt;
不能又失败，至少有一个成功匹配。

&lt;RequireAny&gt;
    Require all deny
    Require not ip 192.168.4.150
&lt;/RequireAny&gt;
多个语句有一个成功，即成功优先。
</code></pre><p>（3）虚拟主机</p>
<p><strong>注意：基于FQDN的虚拟主机也不需要NameVirtualHost指令</strong></p>
<blockquote>
<p>示例</p>
</blockquote>
<pre><code>&lt;VirtualHost *:80&gt;
    ServerName www.x.com
    DocumentRoot  &quot;/app/www/x.com&quot;
    &lt;Document &quot;/app/www/x.com&quot;&gt;
        Option None
        AllowOverride None
        Require all granted
    &lt;/Document&gt;
&lt;/VirtualHost&gt;
</code></pre><p><strong>注意：任意目录下的页面只有显示授权才能被访问。</strong></p>
<p>（4）Sendfile机制</p>
<blockquote>
<p>不使用Sendfile的过程</p>
</blockquote>
<pre><code>1、系统调用read()产生一个上下文切换：从user mode 切换到Kernel mode，然后DMA(Direct Memory Access，直接内存存取)执行拷贝，把文件数据从硬盘读到一个Kernel buffer里。
2、数据从Kernel buffer拷贝到user buffer，然后系统调用read()返回，这时又产生一个上下文切换：从kernel mode 切换到user mode
3、系统调用write()产生一个上下文切换：从user mode 切换到kernel mode，然后把步骤2读到user buffer的数据拷贝到kernel buffer，不过关这次是相关联的。
4、系统调用write()返回，产生一个上下文切换：从Kernel mode 切换到User mode，然后DMA从kernel buffer拷贝数据到协议栈。
</code></pre><blockquote>
<p>使用Sendfile机制过程</p>
</blockquote>
<pre><code>1、系统调用sendfile()通过DMA把硬盘数据拷贝到Kernel buffer，然后数据被kernel直接拷贝到另一个与socket相关的kernel buffer。这里没有user mode和kernel mode 之间的切换。在kernel中直接完成了从一个buffer到另一个buffer的拷贝。
2、DMA把数据从kernel buffer直接拷贝给协议栈，没有切换也不需要把数据从user mode拷贝到kernel mode，以为数据就在Kernel 里。
</code></pre><p>（5）方向代理功能</p>
<pre><code>ProxyPass “/” &quot;http://www.example.com/&quot;
ProxyPassReverse &quot;/&quot; &quot;http://www.example.com/&quot;
</code></pre><p>特定URL反向代理</p>
<pre><code>ProxyPass “/image” &quot;http://www.example.com/&quot;
ProxyPassReverse &quot;/image&quot; &quot;http://www.example.com&quot;
</code></pre><blockquote>
<p>示例</p>
</blockquote>
<pre><code>&lt;VirtualHost *:80&gt;
    ServerName www.x.com
    ProxyPass / http://localhost:8080
    ProxyPassReserver / http://localhost:8080
&lt;/VirtualHost&gt;
</code></pre><p>准备三台虚拟注意，CentOS 7 做web服务器，CentOS 7做代理服务器，另一台CentOS 6 做客户端</p>
<p>（5）APR（Apache Portalbe Run-time Libararies，Apache 可移植运行库）</p>
<p>主要为上层的应用程序提供一个可以跨越多操作系统平台使用的底层支持接口库。在早起的Apache版本中，应用程序本身必须能够处理各种具体操作系统平台的细节，并针对不同的平台调用不同的处理函数。</p>

            </div>
            <hr/>

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff;
        background-color: #22AB38;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff;
        background-color: #019FE8;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a class="reward-link btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs">
                        <li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li>
                        <li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#reward .reward-link').on('click', function () {
            $('#rewardModal').openModal();
        });

        $('#rewardModal .close').on('click', function () {
            $('#rewardModal').closeModal();
        });
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            <div class="reprint">
                <p>
                    <span class="reprint-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明:
                    </span>
                    <a href="www.lmfe.org" class="b-link-green">Joah</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2017/11/28/Httpd相关概念/" class="b-link-green">HTTP介绍</a>
                </p>
            </div>
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2017/11/28/DNS访问控制和智能DNS/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="DNS访问控制和智能DNS">
                        
                        <span class="card-title">DNS访问控制和智能DNS</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">DNS的管理功能你是不是有这样的想法，只想让某个IP或者某个IP端的地址进行访问，实现访问控制功能。DNS服务给我们提供了很好的解决方法。
1、选项||allow-query {}；|  允许查询的主机，相当于白名单|allow-trans</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2017-11-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/常用服务/" class="post-category" target="_blank">
                                    常用服务
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/DNS/" target="_blank">
                        <span class="chip bg-color">DNS</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2017/11/28/DNS实战一/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/3.jpg" class="responsive-img" alt="DNS实战">
                        
                        <span class="card-title">DNS实战</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">实战（1）搭建主DNS服务器（a）[root@localhost ~]# yum install -y bind   #安装包（b）[root@localhost ~]# vim /etc/named.conf   #修改主配置文件
方式一</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2017-11-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/常用服务/" class="post-category" target="_blank">
                                    常用服务
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/DNS/" target="_blank">
                        <span class="chip bg-color">DNS</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">

            
                &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
                <span class="white-color">181.1k</span>
            

            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
                </span>
                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/ergedan/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:473823554@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=473823554" class="tooltipped" data-tooltip="QQ联系我: 473823554" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input" autofocus="">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->




    <script async src="/libs/others/busuanzi.pure.mini.js"></script>


</body>
</html>